/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ht_funcs.c                                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: omykolai <omykolai@student.42.fr>          +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2018/03/05 16:35:01 by omykolai          #+#    #+#             */
/*   Updated: 2018/03/06 15:38:59 by omykolai         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <string.h>
#include <stdlib.h>
#include "../libft/libft.h"
#include "../ft_printf/includes/ft_printf.h"

static const unsigned char	g_t[256] =
{
	160, 187, 145, 106, 65, 107, 226, 139, 42, 20, 38, 128, 182, 81, 12,
	70, 41, 83, 196, 238, 120, 121, 93, 137, 185, 50, 173, 161, 212,
	116, 18, 14, 168, 16, 167, 112, 52, 156, 240, 39, 254, 146, 64, 239,
	94, 230, 45, 27, 35, 162, 172, 69, 248, 9, 234, 76, 99, 82, 122,
	205, 237, 40, 53, 250, 23, 48, 49, 129, 10, 111, 118, 235, 178, 220,
	21, 175, 192, 200, 109, 104, 57, 54, 110, 217, 249, 95, 117, 140,
	174, 105, 71, 30, 166, 148, 169, 15, 157, 242, 181, 246, 29, 247,
	165, 126, 243, 25, 103, 252, 68, 144, 98, 51, 199, 11, 171, 214,
	134, 241, 163, 33, 152, 231, 84, 207, 130, 85, 203, 32, 13, 87, 184,
	58, 22, 153, 96, 147, 114, 31, 206, 131, 132, 133, 5, 164, 244, 227,
	74, 19, 143, 102, 183, 34, 67, 155, 26, 176, 142, 113, 186, 198,
	136, 224, 221, 201, 211, 100, 135, 154, 47, 225, 73, 8, 216, 197,
	59, 236, 80, 159, 28, 90, 158, 141, 46, 91, 127, 89, 1, 79, 66, 191,
	55, 229, 119, 101, 124, 190, 44, 223, 92, 194, 24, 115, 72, 245,
	188, 138, 86, 189, 60, 97, 108, 202, 37, 195, 43, 63, 151, 0, 2,
	210, 7, 3, 215, 170, 56, 219, 75, 253, 251, 61, 17, 193, 179, 4, 62,
	88, 228, 209, 36, 232, 123, 218, 208, 222, 77, 125, 149, 204, 180,
	233, 6, 177, 213, 78, 150, 255
};

int		hashkey(const char *key)
{
	int				i;
	int				j;
	int				len;
	unsigned char	h;
	unsigned char	hh[2];

	len = ft_strlen(key);
	j = -1;
	while (++j < 2)
	{
		h = g_t[(key[0] + j) % 256];
		i = 0;
		while (++i < len)
			h = g_t[(unsigned char)(h ^ key[i])];
		hh[j] = h;
	}
	return (hh[0] + (hh[1] << 8));
}

void	del_key(void *key, size_t size)
{
	free(key);
	size = 0;
}
